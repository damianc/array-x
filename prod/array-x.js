(()=>{"use strict";function n(...n){const t={};return this.forEach((e=>{const i=function(t){const e=[];return n.forEach((n=>{const i=n(t);null!==i&&e.push(i)})),e}(e);i.forEach((n=>{n in t||(t[n]=[]),t[n].push(e)}))})),t}function t(n,t=null,e="__unindexed"){return 0===this.length?{}:this.reduce(((i,r,u)=>{let l=function(t,e){let i;try{i="function"==typeof n?n(t,e):t[n]}catch(n){}return i}(r,u);return void 0===l&&(l=e),l in i||(i[l]=[]),i[l].push(function(n,e){return"function"==typeof t?t(n,e):"string"==typeof t?n[t]:n}(r,u)),i}),{})}function e(n,t,e,i,r=null){const u=n.x.index(e,r);return this.map((n=>{const e=n[t];let r;return u[e]&&(r=u[e][0]),{...n,[i]:r}}))}function i(n,t,e,i,r=null){const u=n.x.index(e,r);return this.map((n=>{let e=[];return n[t]&&n[t].length>0&&(e=n[t].map((n=>u[n]&&u[n][0])),e=e.filter((n=>void 0!==n))),{...n,[i]:e}}))}function r(n,t,e,i,r=null){const u=n.x.index(e,r);return this.map((n=>{let e,r=[];return(e=n[t])&&u[e]&&(r=u[e]),{...n,[i]:r}}))}function u(n){return t=>n&&"function"==typeof n?n(t):t}function l(n=null){const t=u(n),e={};return this.reduce(((n,i,r)=>{const u=t(i);return u in e?n:(e[u]=!0,[...n,i])}),[])}function s(n=null){const t=u(n);return this.reduce(((n,e,i)=>0===i?[this[0]]:t(e)===t(this[i-1])?n:[...n,e]),[])}function h(n,t=!0){if(0===this.length)return[];const e=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===e?this:this.slice(0,e+(t?1:0))}function o(n,t,e,i=!0){const r=[];let u=e;for(let e in this){const l=this[e];if(u=t(u,l,e),n(u,l,+e)){i&&r.push(l);break}r.push(l)}return r}function c(n,t=!0){if(0===this.length)return[];const e=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===e?[]:this.slice(e+(t?0:1))}function f(n,t,e,i=!0){const r=[];let u=e;for(let e in this){const l=this[e];if(u=t(u,l,e),n(u,l,+e)){i||r.push(l);break}r.push(l)}return this.slice(r.length)}function d(n){let t=null;function e(t){return"function"==typeof n?n(t):t===n}for(let n in this)if(e(this[n])){t=[+n,this[n]];break}return t}function a(n){let t=[];return this.forEach(((e,i)=>{(function(t){return"function"==typeof n?n(t):t===n})(e)&&t.push([i,e])})),t}function g(n=null){u(n);const t=this.x.findMinIndex(n);return-1===t?null:[t,this[t]]}function b(n=null){u(n);const t=this.x.findMaxIndex(n);return-1===t?null:[t,this[t]]}function p(n=null){const t=u(n);return 0===this.length?null:1===this.length?t(this[0]):this.reduce(((n,e,i)=>{const r=1===i?t(n):n;return Math.min(t(e),r)}))}function y(n=null){return 0===this.length?null:n?this.reduce(((t,e)=>n(e)<n(t)?e:t)):Math.min(...this)}function x(n,t,e=null,i){const r=[(n,i,r,u)=>{let l=t(n,i,r,u);return e&&r===u.length-1&&(l=e(l,u)),l}];return void 0!==i&&r.push(i),n.reduce(...r)}function m(n=null){const t=u(n);return 0===this.length?-1:1===this.length?0:x(this,((n,e,i)=>{if(1===i)return t(e)<t(n)?[e,1]:[n,0];let[r]=n;return t(e)<t(r)?[e,i]:n}),(([,n])=>n))}function A(n=null){const t=u(n);return 0===this.length?null:1===this.length?t(this[0]):this.reduce(((n,e,i)=>{const r=1===i?t(n):n;return Math.max(t(e),r)}))}function v(n=null){return 0===this.length?null:n?this.reduce(((t,e)=>n(e)>n(t)?e:t)):Math.max(...this)}function M(n=null){const t=u(n);return 0===this.length?-1:1===this.length?0:x(this,((n,e,i)=>{if(1===i)return t(e)>t(n)?[e,1]:[n,0];let[r]=n;return t(e)>t(r)?[e,i]:n}),(([,n])=>n))}function E(n){return this.reduce(((t,e)=>{return t+(i=e,("function"==typeof n?n(i):i===n)?1:0);var i}),0)}function k(...n){const t={};return this.forEach((e=>{const i=function(t){if(0===n.length)return[t];const e=[];return n.forEach((n=>{const i=n(t);null!==i&&e.push(i)})),e}(e);i.forEach((n=>{const e=t[n]||0;t[n]=e+1}))})),t}function z(n=null){const t=u(n);return 0===this.length?null:x(this.map((n=>t(n))),((n,t)=>n+t),((n,t)=>n/t.length))}function j(n=[],t=null){const e=u(t);if(0===this.length)return null;let i;Array.isArray(n)&&(i=function(n,t){if(n<=t.length)return t;const e=new Array(n).fill(1);return e.splice(0,t.length,...t),e}(this.length,n));let r=0;return x(this,((t,u,l)=>{const s=function(t,e){return Array.isArray(i)?i[e]:"function"==typeof n?n(t):void 0}(u,l);return r+=s,t+e(u)*s}),(n=>n/r),0)}function O(n=null){const t=u(n);return 0===this.length?null:x(this.map((n=>t(n))),((n,t)=>n+t))}function P(n,t=!1){if(!n||n<=0)return[];const e=this.reduce(((t,e)=>{if(t[t.length-1].length===n)return[...t,[e]];{const n=t.pop();return[...t,[...n,e]]}}),[[]]);return t&&e[e.length-1].length!==n&&e.splice(-1,1),e}function w(n=null,t=!0){return 0===this.length||null===n?[]:this.reduce(((e,i,r)=>{const u=e.pop();return n(i,r)?t?[...e,u,[i]]:[...e,[...u,i],...r===this.length-1?[]:[[]]]:[...e,[...u,i]]}),[[]])}function I(...n){let t=!1;!0===n[n.length-1]&&(t=!0,n.splice(-1,1));const e=n.filter((n=>n>0));if(!e.length)return[...this];let i=0;const r=[...this],u=[];for(;r.length>0;){const n=e[i];u.push(r.splice(0,n)),i<e.length-1?i+=1:i=0}return t&&u[u.length-1].length!==e[i]&&u.splice(-1,1),u}function R(...n){if(0===this.length||0===n.length)return[];let t=this.length;const e=n.filter((n=>!!Array.isArray(n)&&(t=Math.min(t,n.length),!0))),i=[];for(let n=0;n<t;n++){const t=e.map((t=>t[n]));i.push([this[n],...t])}return i}function S(...n){if(0===n.length)return null;let t=this.length>0,e=this.length;const i=n.filter((n=>!!Array.isArray(n)&&(e=Math.max(e,n.length),t=t||n.length>0,!0)));if(!t)return[];const r=[];for(let n=0;n<e;n++){const t=i.map((t=>t[n]));r.push([this[n],...t])}return r}function U(){if(0===this.length)return[];let n;return this.filter((t=>!!Array.isArray(t)&&(n=void 0===n?t.length:Math.min(n,t.length),!0))).reduce(((t,e)=>{for(let i=0;i<n;i++)Array.isArray(t[i])||(t[i]=[]),t[i].push(e[i]);return t}),[])}function q(){if(0===this.length)return[];let n;return this.filter((t=>!!Array.isArray(t)&&(n=void 0===n?t.length:Math.max(n,t.length),!0))).reduce(((t,e)=>{for(let i=0;i<n;i++)Array.isArray(t[i])||(t[i]=[]),t[i].push(e[i]);return t}),[])}function B(n=null){if(null===n)return[...this];let t=0,e=!1;const i=this.reduce(((i,r,u)=>{const l=function(e,i){let r;return r="function"==typeof n?n(e,i):Array.isArray(n)?n.includes(e):e===n,r&&(t+=1),r}(r,u);if(l)return e=!0,i;{let n;if(e)n=[...i,[r]];else{const t=i.slice(0,-1),[e]=i.slice(-1);n=[...t,(e||[]).concat(r)]}return e=!1,n}}),[]);return 0===t?i[0]:i}function C(n,t,e=null,i=!1){const r=[...this];if(n<0&&(n=0),t<0&&(t=0),0===n||0===n&&0===t)return r;null!==e&&r.splice(0,e);const u=[];let l=!0;for(;r.length>0;)l?u.push(r.splice(0,n)):r.splice(0,t),l=!l;return i&&u[u.length-1].length!==n&&u.splice(-1,1),u}function N(n=null){const t=null===n?Math.floor(this.length/2):n;return[this.slice(0,t),this.slice(t)]}function T(n,...t){const[e,i]=this.x.cut(n);return[...e,...t,...i]}function _(n,...t){const e=[...this];return e.splice(n,t.length,...t),e}function D(n,...t){if(0===this.length)return[];const e=[...this],i=n>=0?this.length-n:-1*n;return e.splice(n,t.length,...t.slice(0,i)),e}function F(n,t,e){const i=[...this],r=i.splice(n,t);return i.splice((n=>n>=0?n:this.length+n)(e),0,...r),i}function G(n,t){return this.length>0&&this.forEach(((n,t)=>{this[t]=e(n)})),new Proxy(this,{set:(n,t,i)=>Reflect.set(n,t,t==+t?e(i):i)});function e(e){return Math.min(Math.max(e,n),t)}}function H(n=(n=>n)){return Object.defineProperty(this,"unfold",{value:n=>this[n]}),Object.defineProperty(this,"unshift",{value:(...n)=>{const t=[...n].reverse();this.reverse(),this.push(...t),this.reverse()}}),new Proxy(this,{get(t,e){if("symbol"==typeof e)return Reflect.get(t,e);if(+e==e){const i=t[e];return i?n(i):i}return Reflect.get(t,e)}})}function J(){return this[Symbol.iterator]()}function K(){return Object.freeze(this)}function L(){return Object.seal(this)}function Q(){return Object.preventExtensions(this)}function V(){return[...this]}function W(){return[...this].reverse()}function X(n){const t=Symbol("forEach: break"),e={break:t,continue:Symbol("forEach: continue")};for(let i=0;i<this.length;i++){if(n(this[i],i,e,this)===t)break}}function Y(n,t){if(!(n<=0))for(let e=0,i=1;e<this.length;e+=n)t(this.slice(e,e+n),i++,this)}function Z(n,t,e=!1){if(!(n<=0))for(let i=0;i<this.length;i++){const r=this.slice(i,i+n);if(e&&r.length<n)break;t(r,i,this)}}function $(n=1,t=0,e){const i=this.slice(t,e),r=[];n<=0&&(n=1);for(let t=0;t<i.length;t+=n)r.push(i[t]);return r}function nn(n=0,t=-1,e=1){const i=[];n<0&&(n=this.length+n),t<0&&(t=this.length+t),e<=0&&(e=1);for(let r=n;r<=t;r+=e)if(!(r<0)){if(r>=this.length)break;i.push(this[r])}return i}function tn(){return this.reduce(((n,t)=>[...n,t]),[])}function en(n=1){n<0&&(n=0);const t=[];for(let e=0;e<this.length;e++)t[0===e?0:e+e*n]=this[e];return t}Object.defineProperty(Array.prototype,"x",{get(){const u=this,x={frozen:K.bind(u),forEach:X.bind(u)};return{group:n.bind(u),index:t.bind(u),join1to1:e.bind(u),joinManyTo1:i.bind(u),join1ToMany:r.bind(u),uniq:l.bind(u),uniqSeq:s.bind(u),collectUntil:h.bind(u),collectUntilReduce:o.bind(u),skipUntil:c.bind(u),skipUntilReduce:f.bind(u),localize:d.bind(u),localizeAll:a.bind(u),localizeMin:g.bind(u),localizeMax:b.bind(u),min:p.bind(u),findMin:y.bind(u),findMinIndex:m.bind(u),max:A.bind(u),findMax:v.bind(u),findMaxIndex:M.bind(u),count:E.bind(u),countAll:k.bind(u),avg:z.bind(u),wavg:j.bind(u),sum:O.bind(u),chunk:P.bind(u),chunkByCallback:w.bind(u),chunkByPattern:I.bind(u),zip:R.bind(u),zipAll:S.bind(u),unzip:U.bind(u),unzipAll:q.bind(u),split:B.bind(u),splitByPattern:C.bind(u),cut:N.bind(u),insert:T.bind(u),overwrite:_.bind(u),override:D.bind(u),move:F.bind(u),clamped:G.bind(u),folded:H.bind(u),iterator:J.bind(u),frozen:x.frozen,readonly:x.frozen,readOnly:x.frozen,fixed:L.bind(u),dwarf:Q.bind(u),alterable:V.bind(u),reversed:W.bind(u),forEach:x.forEach,each:x.forEach,forEveryChunk:Y.bind(u),forEveryN:Z.bind(u),everyNth:$.bind(u),select:nn.bind(u),thick:tn.bind(u),sparse:en.bind(u)}}})})();