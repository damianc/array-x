(()=>{"use strict";function n(...n){const t={};return this.forEach((i=>{const e=function(t){const i=[];return n.forEach((n=>{const e=n(t);null!==e&&i.push(e)})),i}(i);e.forEach((n=>{n in t||(t[n]=[]),t[n].push(i)}))})),t}function t(n){return t=>n&&"function"==typeof n?n(t):t}function i(n=null){const i=t(n),e={};return this.reduce(((n,t,r)=>{const u=i(t);return u in e?n:(e[u]=!0,[...n,t])}),[])}function e(n=null){const i=t(n);return this.reduce(((n,t,e)=>0===e?[this[0]]:i(t)===i(this[e-1])?n:[...n,t]),[])}function r(n,t=!0){if(0===this.length)return[];const i=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===i?this:this.slice(0,i+(t?1:0))}function u(n,t,i,e=!0){const r=[];let u=i;for(let i in this){const l=this[i];if(u=t(u,l,i),n(u,l,+i)){e&&r.push(l);break}r.push(l)}return r}function l(n,t=!0){if(0===this.length)return[];const i=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===i?[]:this.slice(i+(t?0:1))}function s(n,t,i,e=!0){const r=[];let u=i;for(let i in this){const l=this[i];if(u=t(u,l,i),n(u,l,+i)){e||r.push(l);break}r.push(l)}return this.slice(r.length)}function h(n){let t=null;function i(t){return"function"==typeof n?n(t):t===n}for(let n in this)if(i(this[n])){t=[+n,this[n]];break}return t}function c(n){let t=[];return this.forEach(((i,e)=>{(function(t){return"function"==typeof n?n(t):t===n})(i)&&t.push([e,i])})),t}function o(n=null){t(n);const i=this.x.findMinIndex(n);return-1===i?null:[i,this[i]]}function f(n=null){t(n);const i=this.x.findMaxIndex(n);return-1===i?null:[i,this[i]]}function d(n=null){const i=t(n);return 0===this.length?null:1===this.length?i(this[0]):this.reduce(((n,t,e)=>{const r=1===e?i(n):n;return Math.min(i(t),r)}))}function a(n=null){return 0===this.length?null:n?this.reduce(((t,i)=>n(i)<n(t)?i:t)):Math.min(...this)}function g(n,t,i=null,e){const r=[(n,e,r,u)=>{let l=t(n,e,r,u);return i&&r===u.length-1&&(l=i(l,u)),l}];return void 0!==e&&r.push(e),n.reduce(...r)}function p(n=null){const i=t(n);return 0===this.length?-1:1===this.length?0:g(this,((n,t,e)=>{if(1===e)return i(t)<i(n)?[t,1]:[n,0];let[r]=n;return i(t)<i(r)?[t,e]:n}),(([,n])=>n))}function b(n=null){const i=t(n);return 0===this.length?null:1===this.length?i(this[0]):this.reduce(((n,t,e)=>{const r=1===e?i(n):n;return Math.max(i(t),r)}))}function y(n=null){return 0===this.length?null:n?this.reduce(((t,i)=>n(i)>n(t)?i:t)):Math.max(...this)}function x(n=null){const i=t(n);return 0===this.length?-1:1===this.length?0:g(this,((n,t,e)=>{if(1===e)return i(t)>i(n)?[t,1]:[n,0];let[r]=n;return i(t)>i(r)?[t,e]:n}),(([,n])=>n))}function M(n){return this.reduce(((t,i)=>{return t+(e=i,("function"==typeof n?n(e):e===n)?1:0);var e}),0)}function A(n=null){const i=t(n);return 0===this.length?null:g(this.map((n=>i(n))),((n,t)=>n+t),((n,t)=>n/t.length))}function m(n=[],i=null){const e=t(i);if(0===this.length)return null;let r;Array.isArray(n)&&(r=function(n,t){if(n<=t.length)return t;const i=new Array(n).fill(1);return i.splice(0,t.length,...t),i}(this.length,n));let u=0;return g(this,((t,i,l)=>{const s=function(t,i){return Array.isArray(r)?r[i]:"function"==typeof n?n(t):void 0}(i,l);return u+=s,t+e(i)*s}),(n=>n/u),0)}function v(...n){if(0===this.length||0===n.length)return[];let t=this.length;const i=n.filter((n=>!!Array.isArray(n)&&(t=Math.min(t,n.length),!0))),e=[];for(let n=0;n<t;n++){const t=i.map((t=>t[n]));e.push([this[n],...t])}return e}function z(){if(0===this.length)return[];let n;return this.filter((t=>!!Array.isArray(t)&&(n=void 0===n?t.length:Math.min(n,t.length),!0))).reduce(((t,i)=>{for(let e=0;e<n;e++)Array.isArray(t[e])||(t[e]=[]),t[e].push(i[e]);return t}),[])}Object.defineProperty(Array.prototype,"x",{get(){const t=this;return{group:n.bind(t),uniq:i.bind(t),uniqSeq:e.bind(t),collectUntil:r.bind(t),collectUntilReduce:u.bind(t),skipUntil:l.bind(t),skipUntilReduce:s.bind(t),localize:h.bind(t),localizeAll:c.bind(t),localizeMin:o.bind(t),localizeMax:f.bind(t),min:d.bind(t),findMin:a.bind(t),findMinIndex:p.bind(t),max:b.bind(t),findMax:y.bind(t),findMaxIndex:x.bind(t),count:M.bind(t),avg:A.bind(t),wavg:m.bind(t),zip:v.bind(t),unzip:z.bind(t)}}})})();