(()=>{"use strict";function n(n){return t=>n&&"function"==typeof n?n(t):t}function t(t=null){const i=n(t),e={};return this.reduce(((n,t,u)=>{const r=i(t);return r in e?n:(e[r]=!0,[...n,t])}),[])}function i(t=null){const i=n(t);return this.reduce(((n,t,e)=>0===e?[this[0]]:i(t)===i(this[e-1])?n:[...n,t]),[])}function e(n,t=!0){if(0===this.length)return[];const i=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===i?this:this.slice(0,i+(t?1:0))}function u(n,t,i,e=!0){const u=[];let r=i;for(let i in this){const l=this[i];if(r=t(r,l,i),n(r,l,+i)){e&&u.push(l);break}u.push(l)}return u}function r(n,t=!0){if(0===this.length)return[];const i=this.findIndex((t=>"function"==typeof n?n(t):t===n));return-1===i?[]:this.slice(i+(t?0:1))}function l(n,t,i,e=!0){const u=[];let r=i;for(let i in this){const l=this[i];if(r=t(r,l,i),n(r,l,+i)){e||u.push(l);break}u.push(l)}return this.slice(u.length)}function s(n){let t=null;function i(t){return"function"==typeof n?n(t):t===n}for(let n in this)if(i(this[n])){t=[+n,this[n]];break}return t}function h(n){let t=[];return this.forEach(((i,e)=>{(function(t){return"function"==typeof n?n(t):t===n})(i)&&t.push([e,i])})),t}function c(t=null){n(t);const i=this.x.findMinIndex(t);return-1===i?null:[i,this[i]]}function o(t=null){n(t);const i=this.x.findMaxIndex(t);return-1===i?null:[i,this[i]]}function f(t=null){const i=n(t);return 0===this.length?null:1===this.length?i(this[0]):this.reduce(((n,t,e)=>{const u=1===e?i(n):n;return Math.min(i(t),u)}))}function d(n=null){return 0===this.length?null:n?this.reduce(((t,i)=>n(i)<n(t)?i:t)):Math.min(...this)}function a(n,t,i=null,e){const u=[(n,e,u,r)=>{let l=t(n,e,u,r);return i&&u===r.length-1&&(l=i(l,r)),l}];return void 0!==e&&u.push(e),n.reduce(...u)}function b(t=null){const i=n(t);return 0===this.length?-1:1===this.length?0:a(this,((n,t,e)=>{if(1===e)return i(t)<i(n)?[t,1]:[n,0];let[u]=n;return i(t)<i(u)?[t,e]:n}),(([,n])=>n))}function g(t=null){const i=n(t);return 0===this.length?null:1===this.length?i(this[0]):this.reduce(((n,t,e)=>{const u=1===e?i(n):n;return Math.max(i(t),u)}))}function p(n=null){return 0===this.length?null:n?this.reduce(((t,i)=>n(i)>n(t)?i:t)):Math.max(...this)}function x(t=null){const i=n(t);return 0===this.length?-1:1===this.length?0:a(this,((n,t,e)=>{if(1===e)return i(t)>i(n)?[t,1]:[n,0];let[u]=n;return i(t)>i(u)?[t,e]:n}),(([,n])=>n))}function M(n){return this.reduce(((t,i)=>{return t+(e=i,("function"==typeof n?n(e):e===n)?1:0);var e}),0)}function y(t=null){const i=n(t);return 0===this.length?null:a(this.map((n=>i(n))),((n,t)=>n+t),((n,t)=>n/t.length))}Object.defineProperty(Array.prototype,"x",{get(){const n=this;return{uniq:t.bind(n),uniqSeq:i.bind(n),collectUntil:e.bind(n),collectUntilReduce:u.bind(n),skipUntil:r.bind(n),skipUntilReduce:l.bind(n),localize:s.bind(n),localizeAll:h.bind(n),localizeMin:c.bind(n),localizeMax:o.bind(n),min:f.bind(n),findMin:d.bind(n),findMinIndex:b.bind(n),max:g.bind(n),findMax:p.bind(n),findMaxIndex:x.bind(n),count:M.bind(n),avg:y.bind(n)}}})})();